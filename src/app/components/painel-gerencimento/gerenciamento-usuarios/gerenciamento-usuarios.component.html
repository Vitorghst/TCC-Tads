<div class="content-body">
  <div class="rounded  bg-white col-md-10 offset-md-1">
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr class="text-black text">
            <th>ID</th>
            <th>Usuario</th>
            <th>Email</th>
            <th>Permissão</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-blue" *ngFor="let usuario of usuarios">
            <td class="pt-3 text">{{ usuario.id }}</td>
            <td class="pt-3 text">{{ usuario.user }}</td>
            <td class="pt-3 text">{{ usuario.email }}</td>
            <td class="pt-3 text">{{ usuario.permissao}}</td>
            <td class="pt-3 text" (click)="editUser(usuario)" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="fas fa-edit"></i></td>
            <td class="pt-3" (click)="deleteUser(usuario.id)"><i class="fas fa-trash-alt"></i></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Editar Usuário</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="form">
  
          <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-user fa-lg me-3 fa-fw margin-icon"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="text" id="form3Example1c" placeholder="User" formControlName="user" class="form-control"
                [ngClass]=" (form.get('user')?.touched ||
                                    form.get('user')?.dirty) &&
                                    form.get('user')?.hasError('required')
                                    ? 'is-invalid'
                                    : '' ||  form.get('user')?.hasError('minlength')
                                    ? 'is-invalid'
                                    : '' ||
                                      (( form.get('user')?.valid ||
                                      form.get('user')?.dirty) &&
                                        ! form.get('user')?.invalid)
                                    ? 'is-valid'
                                    : ''
                                ">
                <small *ngIf="form.get('user')?.invalid && 
                      form.get('user')?.touched " class="text-danger font-size"><i
                              class="fas fa-times"></i> Campo obrigatório</small>
              </div>
          </div>

          <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-envelope fa-lg me-3 fa-fw margin-icon"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="email" id="form3Example3c" placeholder="Email"  formControlName="email" class="form-control"
                [ngClass]=" (form.get('email')?.touched ||
                                    form.get('email')?.dirty) &&
                                    form.get('email')?.hasError('required')
                                    ? 'is-invalid'
                                    : '' ||  form.get('email')?.hasError('minlength')
                                    ? 'is-invalid'
                                    : '' ||
                                      (( form.get('email')?.valid||
                                      form.get('email')?.dirty) &&
                                        ! form.get('email')?.invalid)
                                    ? 'is-valid'
                                    : ''
                                ">
                <small *ngIf="form.get('email')?.invalid && 
                      form.get('email')?.touched " class="text-danger font-size"><i
                              class="fas fa-times"></i> Campo obrigatório</small>
              </div>
          </div>

          <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-lock fa-lg me-3 fa-fw margin-icon"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="password" id="form3Example4c" placeholder="Senha" formControlName="password" class="form-control" 
                [ngClass]=" (form.get('password')?.touched ||
                                    form.get('password')?.dirty) &&
                                    form.get('password')?.hasError('required')
                                    ? 'is-invalid'
                                    : '' ||  form.get('password')?.hasError('minlength')
                                    ? 'is-invalid'
                                    : '' ||
                                      (( form.get('password')?.valid ||
                                      form.get('password')?.dirty) &&
                                        ! form.get('password')?.invalid)
                                    ? 'is-valid'
                                    : ''
                                ">
                <small *ngIf="form.get('password')?.invalid && 
                      form.get('password')?.touched " class="text-danger font-size"><i
                              class="fas fa-times"></i> Campo obrigatório</small>
              </div>
          </div>

          <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-key fa-lg me-3 fa-fw margin-icon"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="password" id="form3Example4cd" placeholder="Confirmar Senha" formControlName="confirmPassword" class="form-control"
                [ngClass]=" (form.get('confirmPassword')?.touched ||
                                    form.get('confirmPassword')?.dirty) &&
                                    form.get('confirmPassword')?.hasError('required')
                                    ? 'is-invalid'
                                    : '' ||  form.get('confirmPassword')?.hasError('minlength')
                                    ? 'is-invalid'
                                    : '' ||
                                      (( form.get('confirmPassword')?.valid ||
                                      form.get('confirmPassword')?.dirty) &&
                                        ! form.get('confirmPassword')?.invalid)
                                    ? 'is-valid'
                                    : ''
                                ">
                <small *ngIf="form.get('confirmPassword')?.invalid && 
                form.get('confirmPassword')?.touched " class="text-danger font-size"><i
                        class="fas fa-times"></i> Campo obrigatório</small>
              </div>
            </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        <button type="button" class="btn btn-success" data-bs-dismiss="modal" (click)="updateUser()">Salvar</button>
      </div>
    </div>
  </div>
</div>